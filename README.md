# Automate Backup System

This project automates the backup of files and directories on a Linux system using `rsync`, schedules tasks with `cron`, and sends email notifications via `s-nail` and `postfix`. It is designed for reliability, efficiency, and ease of use, making it ideal for system administrators managing routine backups.

---

### üõ†Ô∏è Tools Used in the Backup System

**`rsync`:**  
Efficiently synchronizes files and directories locally or over SSH with minimal data transfer. Ideal for incremental backups, while preserving file attributes, timestamps, and permissions.

**`cron`:**  
A time-based job scheduler used to run tasks automatically at specified times or intervals. In this project, it triggers the backup script daily without requiring manual intervention.

**`postfix`:**  
A Mail Transfer Agent (MTA) responsible for routing and delivering emails. It sends outbound email notifications generated by the backup script. Without Postfix (or a similar MTA), the system cannot send email externally.

**`s-nail` (or `mailx`):**  
A command-line Mail User Agent (MUA) used to compose and send emails from shell scripts. It hands off the message to Postfix for actual delivery.

---

### üîÑ How These Tools Work Together

1. `cron` triggers the backup script at a scheduled time.
2. The script uses `rsync` to copy data to a remote backup location.
3. Upon completion, the script uses `s-nail` to send a success or failure report via email.
4. `postfix` handles the actual sending of the email from your local server to the recipient.

## Steps to Set Up the Automated Backup System

### ‚úÖ Create a client user:
Create a new user on the client machine (from where the backup will run).
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/1stimg.png" width="700" />

### ‚úÖ Grant Sudo Privileges to the Client User: 
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/2.png" width="700" />

### Create a remote user:
Create a user on the remote machine (where backups will be stored).
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/3.png" width="700" />

### Grant Sudo Privileges to the Remote User:
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/4.png" width="700" />

### Generate SSH key on the clinet machine:
Use `ssh-keygen` to generate a public/private key pair for passwordless authentication.
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/5.png" width="700" />

### Copy the Public Key to the Remote Machine:
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/6.png" width="700" />

### Store the public key in `~/.ssh/authorized_keys` on the Remote Machine:
Ensure the key is added to the `authorized_keys` file and set proper permissions.
```bash
chmod 600 ~/.ssh/authorized_keys
```
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/7.png" width="700" />

### Create 'backup' directory on the remote machine:
This is the target directory where backups will be stored.
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/8.png" width="700" />

### Create backup.sh and backup.log on the Client Machine:
`backup.sh` contains backup logic and `backup.log` file store logs related to backup status.
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/9.png" width="700" />

### Write the Backup Script:
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/10.png" width="700" />

### Install the s-nail Package:
Install s-nail(Ubuntu/Debian) or mailx(CentOS/RHEL) on the client machine for email alerts.
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/11.png" width="700" />

### Install the postfix Package:
Install and configure Postfix to enable email delivery from the local machine.
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/12.png" width="700" />

### Configure Postfix 
Edit the Postfix configuration file /etc/postfix/main.cf:
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/13.png" width="700" />

### Add a relayhost in `main.cf`:
Set the external SMTP server (e.g., Gmail) as the relay host:
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/14.png" width="700" />

### Add myhostname in `main.cf`: 
Specify the hostname of your client machine:
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/15.png" width="700" />

### Specify the location of the sasl_passwd file and enable SASL authentication for postfix: 
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/16.png" width="700" />

### create sasl_password file under /etc/postfix/sasl and convert it to a db file:
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/17.png" width="700" />

### Set 600 permission to sasl_passwd file and start postfix service also make backup.sh script executable:
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/18.png" width="700" />

### Schedule the Backup Script with Crontab:
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/19.png" width="700" />

### Output Verification:
#### Check the backup.log file on the client to confirm rsync operations:
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/22.png" width="700" />
#### Login to the remote machine and verify that files were backed up to the backup/ directory:
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/20.png" width="700" />
#### Check the mailbox or email client for backup status notifications:
<img src="https://github.com/Vaishnavi-M-Patil/automatebackup/blob/main/assets/21.png" width="700" />


